## Вопрос: Как устроен HashMap внутри?

`HashMap` в Java — это массив **корзин (buckets)**, каждая из которых содержит связанный список (или дерево, если >8 элементов).

- При `put(key, value)`:
  1. Вычисляется `hash = key.hashCode()`
  2. Индекс корзины: `index = hash & (capacity - 1)`
  3. Если корзина пуста — кладём туда
  4. Если занята — сравниваем ключи (`.equals()`), если совпадает — заменяем значение, иначе добавляем в конец списка
  5. Если в корзине >8 элементов и capacity >= 64 — список преобразуется в красно-чёрное дерево

- При `get(key)` — аналогично: вычисляем хэш → идём в корзину → ищем по `.equals()`

С Java 8 — оптимизация через деревья для защиты от DoS-атак хэш-коллизиями.
